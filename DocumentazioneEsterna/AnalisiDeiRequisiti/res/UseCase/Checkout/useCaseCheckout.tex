\begin{figure}[H]
\centering
\includegraphics[scale=0.6]{res/UseCase/Immagini/AcquistoProdottiGenerale}
\caption{Diagramma UML per modulo di acquisto prodotti}
\end{figure}

\subsubsection{UCX - Acquisto prodotti}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Attori secondari}: Stripe;
\item \textbf{Descrizione}: il cliente può acquistare i prodotti presenti nel suo carrello;
\item \textbf{Scenario Principale}: 
\begin{enumerate}
	\item il cliente inizia il checkout dei prodotti nel carrello \textbf{[UCX.1]};
	\item il cliente inserisce l'indirizzo di spedizione e i dati per il pagamento \textbf{[UCX.3]};
	\item il cliente procede al pagamento \textbf{[UCX.4]};
	\item il cliente visualizza un riepilogo dell'ordine effettuato \textbf{[UCX.6]};
\end{enumerate}
\item \textbf{Precondizione}: l'utente è autenticato come cliente, si trova nella pagina del carrello e ha precedentemente inserito dei prodotti nel carrello;
\item \textbf{Postcondizione}: il costo totale dei prodotti acquistati è stato prelevato dal conto specificato dal cliente. È stata inviata un'email al cliente per confermare l'acquisto.
\end{itemize}

\begin{figure}[H]
\centering
\includegraphics[scale=0.6]{res/UseCase/Immagini/AcquistoProdotti}
\caption{Diagramma UML per UCX - Acquisto prodotti}
\end{figure}

\subsubsection{UCX.1 - Checkout}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Descrizione}: il cliente effettua il checkout per iniziare la procedura di acquisto prodotti;
\item \textbf{Scenario Principale}: il cliente preme il bottone dedicato al checkout, nella pagina del carrello;
\item \textbf{Estensioni}:
\begin{itemize}
\item se non è presente alcun prodotto nel carrello viene visualizzato un messaggio di errore \textbf{[UCX.2]}:;
\end{itemize}
\item \textbf{Precondizione}: l'utente è autenticato come cliente, si trova nella pagina del carrello e ha premuto il bottone dedicato al checkout;
\item \textbf{Postcondizione}: il cliente viene reindirizzato alla pagina di selezione indirizzo di spedizione e di pagamento, dove può continuare l'acquisto dei prodotti.
\end{itemize}

\subsubsection{UCX.2 - Visualizzazione errore carrello vuoto}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Descrizione}: il cliente visualizza un messaggio di errore che lo informa che per procedere al checkout è necessario avere almeno un prodotto nel carrello;
\item \textbf{Scenario Principale}: il cliente prova ad effettuare il checkout senza aver precedentemente inserito prodotti nel suo carrello.
\item \textbf{Precondizione}: il cliente si trova nella pagina del carrello e ha premuto il bottone dedicato al checkout;
\item \textbf{Postcondizione}: viene visualizzato un messaggio che informa il cliente della necessità di avere almeno un prodotto nel carrello per iniziare il checkout.
\end{itemize}

\subsubsection{UCX.3 - Inserimento dati necessari all'acquisto}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Descrizione}: il cliente compila i campi dati necessari all'acquisto dei prodotti selezionati;
\item \textbf{Scenario Principale}: il cliente si trova nella pagina di pagamento e, per concludere l'acquisto, inserisce i seguenti dati:
\begin{itemize}
	\item TODO il cliente verifica l'indirizzo di spedizione indicato in fase di registrazione o può indicarne uno diverso \textbf{[UCX.3.1]};
	\item il cliente inserisce i dati relativi al metodo di pagamento, come nome, cognome e numero di carta di credito \textbf{[UCX.3.2]};
\end{itemize}
\item \textbf{Precondizione}: il cliente ha superato il checkout e si trova nella pagina di pagamento;
\item \textbf{Postcondizione}: il cliente può continuare il pagamento e l'acquisto.
\end{itemize}

%\subsubsection{UCX.3.1 - TODO Inserimento indirizzo di spedizione}
%\begin{itemize}
%\item \textbf{Attori primari}: cliente;
%\item \textbf{Descrizione}: il cliente inserisce i dati dell'indirizzo di spedizione;
%\item \textbf{Scenario Principale}: 
%\item \textbf{Estensioni}:

%\item \textbf{Precondizione}: il cliente ha superato il checkout e si trova nella pagina di pagamento;
%\item \textbf{Postcondizione}: il cliente ha compilato i dati relativi all'indirizzo di spedizione.
%\end{itemize}

\begin{figure}[H]
\centering
\includegraphics[scale=0.6]{res/UseCase/Immagini/InserimentoDatiPagamento}
\caption{Diagramma UML per UCX - Inserimento dati di pagamento}
\end{figure}

\subsubsection{UCX.3.2 - Inserimento dati di pagamento}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Descrizione}: il cliente inserisce i dati relativi alla sua carta di pagamento;
\item \textbf{Scenario Principale}: il cliente inserisce nel form relativo ai dati di pagamento le seguenti informazioni:
\begin{itemize}
	\item nome collegato al conto \textbf{[UCX.3.2.1]};
	\item cognome collegato al conto \textbf{[UCX.3.2.2]};
	\item numero di carta \textbf{[UCX.3.2.3]};
	\item mese e anno di scadenza della carta \textbf{[UCX.3.2.4]};
	\item codice di sicurezza \textbf{[UCX.3.2.5]};
\end{itemize}
\item \textbf{Precondizione}: il cliente ha superato il checkout e si trova nella pagina di pagamento;
\item \textbf{Postcondizione}: il cliente ha compilato i dati di pagamento.
\end{itemize}

\subsubsection{UCX.3.2.1 - Inserimento nome}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Descrizione}: il cliente inserisce nelle informazioni richieste per il pagamento il nome;
\item \textbf{Scenario Principale}: il cliente inserisce nel form relativo ai dati di pagamento il nome collegato al conto;
\item \textbf{Precondizione}: il cliente ha superato il checkout e si trova nella pagina di pagamento;
\item \textbf{Postcondizione}: il cliente ha compilato il campo dati dedicato al nome;
\end{itemize}

\subsubsection{UCX.3.2.2 - Inserimento cognome}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Descrizione}: il cliente inserisce nelle informazioni richieste per il pagamento il cognome;
\item \textbf{Scenario Principale}: il cliente inserisce nel form relativo ai dati di pagamento il cognome collegato al conto;
\item \textbf{Precondizione}: il cliente ha superato il checkout e si trova nella pagina di pagamento;
\item \textbf{Postcondizione}: il cliente ha compilato il campo dati dedicato al cognome;
\end{itemize}

\subsubsection{UCX.3.2.3 - Inserimento numero di carta di credito}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Descrizione}: il cliente inserisce nelle informazioni richieste per il pagamento il numero di carta;
\item \textbf{Scenario Principale}: il cliente inserisce nel form relativo ai dati di pagamento il numero di carta di credito;
\item \textbf{Precondizione}: il cliente ha superato il checkout e si trova nella pagina di pagamento;
\item \textbf{Postcondizione}: il cliente ha compilato il campo dati dedicato al numero di carta di pagamento;
\end{itemize}

\subsubsection{UCX.3.2.4 - Inserimento data di scadenza}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Descrizione}: il cliente inserisce nelle informazioni richieste per il pagamento il mese e l'anno di scadenza della carta di credito;
\item \textbf{Scenario Principale}: il cliente inserisce nel form relativo ai dati di pagamento mese e l'anno di scadenza della carta;
\item \textbf{Precondizione}: il cliente ha superato il checkout e si trova nella pagina di pagamento;
\item \textbf{Postcondizione}: il cliente ha compilato il campo dati dedicato alla data di scadenza;
\end{itemize}

\subsubsection{UCX.3.2.5 - Inserimento codice di sicurezza}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Descrizione}: il cliente inserisce nelle informazioni richieste per il pagamento il codice di sicurezza;
\item \textbf{Scenario Principale}: il cliente inserisce nel form relativo ai dati di pagamento il codice di sicurezza collegato alla carta di credito;
\item \textbf{Precondizione}: il cliente ha superato il checkout e si trova nella pagina di pagamento;
\item \textbf{Postcondizione}: il cliente ha compilato il campo dati dedicato al codice di sicurezza;
\end{itemize}

\subsubsection{UCX.4 - Pagamento}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Attori secondari}: Stripe;
\item \textbf{Descrizione}: il cliente, dopo aver inserito i dati richiesti, procede all'ordine. Il pagamento viene effettuato tramite Stripe, che riporterà l'esito ed eventuali errori;
\item \textbf{Scenario Principale}: il cliente conferma l'ordine tramite l'apposito bottone;
\item \textbf{Estensioni}:
\begin{itemize}
	\item il pagamento non va a buon fine. Il cliente visualizza un messaggio di errore contenente le cause del fallimento \textbf{[UCX.5]};
\end{itemize}
\item \textbf{Precondizione}: il cliente si trova nella pagina di pagamento e ha compilato i campi dati necessari per procedere all'acquisto;
\item \textbf{Postcondizione}: il costo totale dei prodotti acquistati è stato prelevato dal conto specificato dal cliente. È stata inviata un'email al cliente per confermare l'acquisto. Al cliente viene mostrato un riepilogo dell'ordine appena effettuato.
\end{itemize}

\subsubsection{UCX.5 - Visualizzazione errore pagamento}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Attori secondari}: Stripe;
\item \textbf{Descrizione}: il cliente visualizza un messaggio di errore che lo informa del motivo per il fallimento del pagamento. L'utente può poi controllare i dati inseriti e ritentare il pagamento;
\item \textbf{Scenario Principale}: il cliente prova ad effettuare il pagamento inserendo dati di una carta che per qualche motivo rifiuta l'addebito.
\item \textbf{Precondizione}: il cliente si trova nella pagina di pagamento e ha compilato i campi dati necessari per procedere all'acquisto;
\item \textbf{Postcondizione}: viene visualizzato un messaggio che informa il cliente dell'errore avvenuto nel processo di pagamento, consigliandogli di controllare i dati inseriti e riprovare.
\end{itemize}

\subsubsection{UCX.6 - Visualizzazione riepilogo ordine}
\begin{itemize}
\item \textbf{Attori primari}: cliente;
\item \textbf{Attori secondari}:
\item \textbf{Descrizione}: il cliente visualizza un riepilogo dell'ordine appena effettuato contenente l'elenco di prodotti, ognuno con prezzo e quantità, il costo totale, le tasse, l'indirizzo di spedizione e la data.
\item \textbf{Scenario Principale}: il cliente ha effettuato un ordine e ne visualizza un riepilogo.
\item \textbf{Precondizione}: il cliente ha completato un ordine ed il pagamento è andato a buon fine.
\item \textbf{Postcondizione}: viene visualizzato un riepilogo dell'ordine effettuato.
\end{itemize}
